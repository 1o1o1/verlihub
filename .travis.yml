sudo: required
dist: focal
language: cpp

compiler:
    - gcc
    #- clang

os:
    - linux
    #- osx

before_install:
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install gettext mariadb libmaxminddb lua libgcrypt pcre; fi
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install libmysqlclient-dev libpcre3-dev libmaxminddb-dev libicu-dev libasprintf-dev libssl-dev; fi
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install python2.7-dev liblua5.2-dev libperl-dev; fi

before_script:
    - mkdir build
    - cd build
    - cmake -DDEFINE_DEBUG=ON -DINSTALL_CMAKE_FILES=OFF ..

script:
    - make
    #- sudo make install
